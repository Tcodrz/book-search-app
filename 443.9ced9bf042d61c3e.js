"use strict";(self.webpackChunkbook_search=self.webpackChunkbook_search||[]).push([[443],{4443:(E,u,s)=>{s.r(u),s.d(u,{BookSearchModule:()=>R});var v=s(928),d=s(8408),c=s(6019),r=s(7537),Z=s(4596),b=s(3059),C=s(5298),m=s(7593),g=s(7908),h=s(4753),p=s(3414),o=s(3668),f=s(9007),k=s(6223),T=s(450),M=s(9463),x=s(9886),w=s(481),S=s(7043),O=s(2997),A=s(8344);function I(e,i){1&e&&o._UZ(0,"p-progressSpinner")}let P=(()=>{class e{constructor(t){this.store=t,this.isLoading$=(0,O.of)(!1)}ngOnInit(){this.isLoading$=this.store.select("app").pipe((0,h.U)(t=>t.loading))}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(f.yh))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-loader"]],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(t,n){1&t&&(o.YNc(0,I,1,0,"p-progressSpinner",0),o.ALo(1,"async")),2&t&&o.Q6J("ngIf",o.lcZ(1,1,n.isLoading$))},directives:[c.O5,A.G],pipes:[c.Ov],encapsulation:2,changeDetection:0}),e})();function L(e,i){if(1&e&&(o.TgZ(0,"h2"),o._uU(1),o.qZA()),2&e){const t=o.oxw();o.xp6(1),o.hij(" Hello, ",t.username," ")}}let _=(()=>{class e{constructor(){this.search=new o.vpe,this.searchForm=new r.cw({intitle:new r.NI(""),inauthor:new r.NI(""),inpublisher:new r.NI(""),subject:new r.NI("")}),this.subscription=new g.w0,this.username=""}set user(t){t&&(this.username=t.username)}set query(t){(function(e,i){for(const t in e)if(e[t]!==i[t])return!1;return!0})(t,this.searchForm.value)||this.searchForm.patchValue(t)}ngOnInit(){this.subscription=this.searchForm.valueChanges.pipe((0,M.b)(400)).subscribe(t=>{this.search.emit(t)})}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-search"]],inputs:{user:"user",query:"query"},outputs:{search:"search"},decls:30,vars:1,consts:[["pTemplate","header"],[3,"formGroup"],[1,"search-info"],[1,"pi","pi-search"],[1,"search-inputs"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],[1,"pi","pi-book"],["type","text","pInputText","","formControlName","intitle","placeholder","Title"],[1,"pi","pi-user"],["type","text","pInputText","","formControlName","inauthor","placeholder","Author"],[1,"pi","pi-users"],["type","text","pInputText","","formControlName","inpublisher","placeholder","Publisher"],[1,"pi","pi-list"],["type","text","pInputText","","formControlName","subject","placeholder","Category"],[1,"loader-container"]],template:function(t,n){1&t&&(o.TgZ(0,"p-fieldset"),o.YNc(1,L,2,1,"ng-template",0),o.TgZ(2,"form",1),o.TgZ(3,"div",2),o._UZ(4,"i",3),o.TgZ(5,"div"),o._uU(6," You can combine any of the parameters to find books, but at least one is required "),o.qZA(),o.qZA(),o.TgZ(7,"div",4),o.TgZ(8,"div"),o.TgZ(9,"div",5),o.TgZ(10,"span",6),o._UZ(11,"i",7),o.qZA(),o._UZ(12,"input",8),o.qZA(),o.qZA(),o.TgZ(13,"div"),o.TgZ(14,"div",5),o.TgZ(15,"span",6),o._UZ(16,"i",9),o.qZA(),o._UZ(17,"input",10),o.qZA(),o.qZA(),o.TgZ(18,"div"),o.TgZ(19,"div",5),o.TgZ(20,"span",6),o._UZ(21,"i",11),o.qZA(),o._UZ(22,"input",12),o.qZA(),o.qZA(),o.TgZ(23,"div"),o.TgZ(24,"div",5),o.TgZ(25,"span",6),o._UZ(26,"i",13),o.qZA(),o._UZ(27,"input",14),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(28,"div",15),o._UZ(29,"app-loader"),o.qZA()),2&t&&(o.xp6(2),o.Q6J("formGroup",n.searchForm))},directives:[x.p,w.jx,r._Y,r.JL,r.sg,r.Fj,S.o,r.JJ,r.u,P],styles:[".search-info[_ngcontent-%COMP%]{border:1px solid #6467f2;background:#dadafc;color:#404040;padding:.8rem .5rem;width:-moz-fit-content;width:fit-content;border-radius:10px;font-weight:500;display:flex;align-items:center}.search-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;font-size:1.1rem;color:#326fd1}.search-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;flex-wrap:nowrap}.search-inputs[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:1rem 1rem 0 0}@media only screen and (max-width: 768px){.search-inputs[_ngcontent-%COMP%]{flex-wrap:wrap}.search-inputs[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:5px auto 0 0;width:100%}}"],changeDetection:0}),e})();var B=s(4750),U=s(4115);function J(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"li",5),o.NdJ("click",function(){const l=o.CHM(t).$implicit;return o.oxw(2).bookClicked(l)}),o.TgZ(1,"div",6),o._UZ(2,"img",7),o.qZA(),o.TgZ(3,"div",8),o.TgZ(4,"h4"),o._uU(5),o.qZA(),o.TgZ(6,"p"),o._uU(7),o.ALo(8,"arrayToString"),o.qZA(),o.TgZ(9,"p"),o._uU(10),o.qZA(),o.qZA(),o.qZA()}if(2&e){const t=i.$implicit;o.xp6(2),o.Q6J("src",null==t.volumeInfo.imageLinks?null:t.volumeInfo.imageLinks.smallThumbnail,o.LSH),o.xp6(3),o.Oqu(t.volumeInfo.title),o.xp6(2),o.Oqu(o.lcZ(8,4,t.volumeInfo.authors)),o.xp6(3),o.hij("Language: ",t.volumeInfo.language,"")}}function N(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div",1),o.TgZ(1,"cdk-virtual-scroll-viewport",2),o.YNc(2,J,11,6,"li",3),o.qZA(),o.TgZ(3,"button",4),o.NdJ("click",function(){return o.CHM(t),o.oxw().loadMore()}),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.xp6(1),o.Q6J("itemSize",t.books.length-1),o.xp6(1),o.Q6J("cdkVirtualForOf",t.books),o.xp6(1),o.Q6J("disabled",!t.loadMoreEnabled)}}let Q=(()=>{class e{constructor(){this.loadMoreEnabled=!0,this.load=new o.vpe,this.showDetails=new o.vpe,this.books=[]}set value(t){this.books=t||[]}loadMore(){this.load.emit(this.books.length-1)}bookClicked(t){this.showDetails.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-results"]],inputs:{value:"value",loadMoreEnabled:"loadMoreEnabled"},outputs:{load:"load",showDetails:"showDetails"},decls:1,vars:1,consts:[["class","result-container",4,"ngIf"],[1,"result-container"],[3,"itemSize"],["class","item-wrap",3,"click",4,"cdkVirtualFor","cdkVirtualForOf"],["pButton","","type","button","label","load more","icon","pi pi-sync",1,"p-button-sm","p-button-secondary","load-more",3,"disabled","click"],[1,"item-wrap",3,"click"],[1,"thumbnail-wrap"],["width","48",2,"display","inline-block","margin","2px 10px 2px 2px",3,"src"],[1,"info-wrap"]],template:function(t,n){1&t&&o.YNc(0,N,4,3,"div",0),2&t&&o.Q6J("ngIf",n.books.length)},directives:[c.O5,d.N7,d.xd,d.x0,B.Hq],pipes:[U.S],styles:[".virtual-scroll-wrap[_ngcontent-%COMP%]{width:50%;margin:auto;min-width:380px}.load-more[_ngcontent-%COMP%]{margin-top:1rem}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{height:60vh}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;height:-moz-fit-content;height:fit-content;list-style:none;border-bottom:1px solid #ccc;padding:10px 5px}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f5f9ff;cursor:pointer}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]   .thumbnail-wrap[_ngcontent-%COMP%]{width:100px;display:inline-block}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]   .thumbnail-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:65px;margin:18px 14px}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]   .info-wrap[_ngcontent-%COMP%]{vertical-align:top;display:inline-block}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]   .info-wrap[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 5px}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]   .info-wrap[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0}"],changeDetection:0}),e})();var F=s(4733);const q=[{path:"",component:(()=>{class e{constructor(t,n){this.store=t,this.booksSearchService=n,this.books=[],this.booksSubscription=new g.w0,this.totalItems=0,this.showModal=!1,this.loadMoreEnabled=!0}ngOnInit(){this.booksSubscription=this.store.select("books").subscribe(t=>{this.books=t.books,this.lastQuery=t.query,this.totalItems=t.totalItems,this.loadMoreEnabled=!!this.books&&this.books.length<this.totalItems}),this.user$=this.store.select("user").pipe((0,h.U)(t=>t.user))}ngOnDestroy(){this.booksSubscription.unsubscribe()}onSearch(t){const n=this.booksSearchService.buildQuery(t);this.booksSearchService.isValidQuery(n)?(this.store.dispatch(p.gg({payload:t})),this.store.dispatch(p.yC({payload:n}))):this.store.dispatch(p.ZH())}onLoadMore(t){t<this.totalItems-1&&this.store.dispatch(p.nR({payload:{index:t,lastQuery:this.lastQuery}}))}onShowBookDetails(t){this.book=t,this.showModal=!0}addBookToWishList(){this.store.dispatch(p.s3({payload:this.book})),this.hideModal()}hideModal(){this.showModal=!1}bookInWishList(){return this.store.select("books").pipe((0,h.U)(t=>t.wishList.findIndex(n=>n.id===this.book.id)>=0))}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(f.yh),o.Y36(k.Q))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-book-search"]],decls:7,vars:11,consts:[[1,"container"],[3,"user","query","search"],[3,"value","loadMoreEnabled","load","showDetails"],[3,"value","showModal","bookInWishList","hide","addToWishList"]],template:function(t,n){1&t&&(o._UZ(0,"app-navbar"),o.TgZ(1,"div",0),o.TgZ(2,"app-search",1),o.NdJ("search",function(l){return n.onSearch(l)}),o.ALo(3,"async"),o.qZA(),o.TgZ(4,"app-results",2),o.NdJ("load",function(l){return n.onLoadMore(l)})("showDetails",function(l){return n.onShowBookDetails(l)}),o.qZA(),o.qZA(),o.TgZ(5,"app-book-modal",3),o.NdJ("hide",function(){return n.hideModal()})("addToWishList",function(){return n.addBookToWishList()}),o.ALo(6,"async"),o.qZA()),2&t&&(o.xp6(2),o.Q6J("user",o.lcZ(3,7,n.user$))("query",n.lastQuery),o.xp6(2),o.Q6J("value",n.books)("loadMoreEnabled",n.loadMoreEnabled),o.xp6(1),o.Q6J("value",n.book)("showModal",n.showModal)("bookInWishList",o.lcZ(6,9,n.bookInWishList())))},directives:[T.S,_,Q,F.A],pipes:[c.Ov],styles:[""],changeDetection:0}),e})(),canActivate:[C.a]}];let D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[m.Bz.forChild(q)],m.Bz]}),e})(),R=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({providers:[],imports:[[c.ez,d.Cl,v.ud,D,r.UX,b.W,Z.I]]}),e})()}}]);